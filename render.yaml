services:
  # 1. Auth Service
  - type: web
    name: outfitgo-auth-service
    runtime: node
    region: singapore
    plan: free
    rootDir: backend/auth-service
    buildCommand: npm install
    startCommand: node src/server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 4001
      - key: MONGO_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: JWT_EXPIRES_IN
        value: 7d
      - key: SUPER_ADMIN_EMAIL
        value: admin@outfitgo.com
      - key: SUPER_ADMIN_PASSWORD
        sync: false
    healthCheckPath: /health

  # 2. Product Service
  - type: web
    name: outfitgo-product-service
    runtime: node
    region: singapore
    plan: free
    rootDir: backend/product-service
    buildCommand: npm install
    startCommand: node src/server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 4002
      - key: MONGO_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: CLOUDINARY_NAME
        sync: false
      - key: CLOUDINARY_API_KEY
        sync: false
      - key: CLOUDINARY_API_SECRET
        sync: false
    healthCheckPath: /health

  # 3. Cart Service
  - type: web
    name: outfitgo-cart-service
    runtime: node
    region: singapore
    plan: free
    rootDir: backend/cart-service
    buildCommand: npm install
    startCommand: node src/server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 4003
      - key: MONGO_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: PRODUCT_SERVICE_URL
        value: https://outfitgo-product-service.onrender.com
    healthCheckPath: /health

  # 4. Order Service
  - type: web
    name: outfitgo-order-service
    runtime: node
    region: singapore
    plan: free
    rootDir: backend/order-service
    buildCommand: npm install
    startCommand: node src/server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 4004
      - key: MONGO_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: PRODUCT_SERVICE_URL
        value: https://outfitgo-product-service.onrender.com
      - key: CART_SERVICE_URL
        value: https://outfitgo-cart-service.onrender.com
    healthCheckPath: /health

  # 5. Payment Service
  - type: web
    name: outfitgo-payment-service
    runtime: node
    region: singapore
    plan: free
    rootDir: backend/payment-service
    buildCommand: npm install
    startCommand: node src/server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 4005
      - key: MONGO_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: RAZORPAY_KEY_ID
        sync: false
      - key: RAZORPAY_KEY_SECRET
        sync: false
      - key: RAZORPAY_WEBHOOK_SECRET
        sync: false
      - key: ORDER_SERVICE_URL
        value: https://outfitgo-order-service.onrender.com
      - key: CURRENCY
        value: INR
    healthCheckPath: /health

  # 6. Live Service
  - type: web
    name: outfitgo-live-service
    runtime: node
    region: singapore
    plan: free
    rootDir: backend/live-service
    buildCommand: npm install
    startCommand: node src/server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 4006
      - key: MONGO_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: CLOUDINARY_NAME
        sync: false
      - key: CLOUDINARY_API_KEY
        sync: false
      - key: CLOUDINARY_API_SECRET
        sync: false
    healthCheckPath: /health

  # 7. Wishlist Service
  - type: web
    name: outfitgo-wishlist-service
    runtime: node
    region: singapore
    plan: free
    rootDir: backend/wishlist-service
    buildCommand: npm install
    startCommand: node src/server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 4007
      - key: MONGO_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: PRODUCT_SERVICE_URL
        value: https://outfitgo-product-service.onrender.com
    healthCheckPath: /health

  # 8. User Service
  - type: web
    name: outfitgo-user-service
    runtime: node
    region: singapore
    plan: free
    rootDir: backend/user-service
    buildCommand: npm install
    startCommand: node src/server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 4008
      - key: MONGO_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: CLOUDINARY_NAME
        sync: false
      - key: CLOUDINARY_API_KEY
        sync: false
      - key: CLOUDINARY_API_SECRET
        sync: false
      - key: AUTH_SERVICE_URL
        value: https://outfitgo-auth-service.onrender.com
    healthCheckPath: /health

  # 9. API Gateway (Main Entry Point)
  - type: web
    name: outfitgo-api-gateway
    runtime: node
    region: singapore
    plan: free
    rootDir: backend/api-gateway
    buildCommand: npm install
    startCommand: node src/server.production.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 8080
      - key: CORS_ORIGINS
        value: http://localhost:3000,https://your-admin-panel.vercel.app
      - key: AUTH_SERVICE_URL
        value: https://outfitgo-auth-service.onrender.com
      - key: PRODUCT_SERVICE_URL
        value: https://outfitgo-product-service.onrender.com
      - key: CART_SERVICE_URL
        value: https://outfitgo-cart-service.onrender.com
      - key: ORDER_SERVICE_URL
        value: https://outfitgo-order-service.onrender.com
      - key: PAYMENT_SERVICE_URL
        value: https://outfitgo-payment-service.onrender.com
      - key: LIVE_SERVICE_URL
        value: https://outfitgo-live-service.onrender.com
      - key: WISHLIST_SERVICE_URL
        value: https://outfitgo-wishlist-service.onrender.com
      - key: USER_SERVICE_URL
        value: https://outfitgo-user-service.onrender.com
    healthCheckPath: /health
